/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={37811:(e,r)=>{"use strict";var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/\\([\u000b\u0020-\u00ff])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function a(e){this.parameters=Object.create(null),this.type=e}r.Q=function(e){if(!e)throw new TypeError("argument string is required");var r="object"==typeof e?function(e){var r;if("function"==typeof e.getHeader?r=e.getHeader("content-type"):"object"==typeof e.headers&&(r=e.headers&&e.headers["content-type"]),"string"!=typeof r)throw new TypeError("content-type header is missing from object");return r}(e):e;if("string"!=typeof r)throw new TypeError("argument string is required to be a string");var o=r.indexOf(";"),i=-1!==o?r.slice(0,o).trim():r.trim();if(!s.test(i))throw new TypeError("invalid media type");var g=new a(i.toLowerCase());if(-1!==o){var l,c,u;for(n.lastIndex=o;c=n.exec(r);){if(c.index!==o)throw new TypeError("invalid parameter format");o+=c[0].length,l=c[1].toLowerCase(),34===(u=c[2]).charCodeAt(0)&&-1!==(u=u.slice(1,-1)).indexOf("\\")&&(u=u.replace(t,"$1")),g.parameters[l]=u}if(o!==r.length)throw new TypeError("invalid parameter format")}return g}},97574:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=[239,187,191];r.createParser=function(e){let r,t,s,a,o,i,g;return l(),{feed:function(e){t=t?t+e:e,r&&function(e){return n.every(((r,n)=>e.charCodeAt(n)===r))}(t)&&(t=t.slice(n.length)),r=!1;const o=t.length;let i=0,g=!1;for(;i<o;){g&&("\n"===t[i]&&++i,g=!1);let e,r=-1,n=a;for(let a=s;r<0&&a<o;++a)e=t[a],":"===e&&n<0?n=a-i:"\r"===e?(g=!0,r=a-i):"\n"===e&&(r=a-i);if(r<0){s=o-i,a=n;break}s=0,a=-1,c(t,i,n,r),i+=r+1}i===o?t="":i>0&&(t=t.slice(i))},reset:l};function l(){r=!0,t="",s=0,a=-1,o=void 0,i=void 0,g=""}function c(r,n,t,s){if(0===s)return g.length>0&&(e({type:"event",id:o,event:i||void 0,data:g.slice(0,-1)}),g="",o=void 0),void(i=void 0);const a=t<0,l=r.slice(n,n+(a?s:t));let c=0;c=a?s:" "===r[n+t+1]?t+2:t+1;const u=n+c,m=s-c,d=r.slice(u,u+m).toString();if("data"===l)g+=d?"".concat(d,"\n"):"\n";else if("event"===l)i=d;else if("id"!==l||d.includes("\0")){if("retry"===l){const r=parseInt(d,10);Number.isNaN(r)||e({type:"reconnect-interval",value:r})}}else o=d}}},98136:function(e,r,n){"use strict";var t=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))((function(s,a){function o(e){try{g(t.next(e))}catch(e){a(e)}}function i(e){try{g(t.throw(e))}catch(e){a(e)}}function g(e){var r;e.done?s(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,i)}g((t=t.apply(e,r||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const a=s(n(93150)),o=n(97574),i=n(29882);let g=!0;console.log("I am background"),a.default.runtime.onInstalled.addListener((function(){console.log("插件已被安装")})),a.default.runtime.setUninstallURL("https://docs.google.com/forms/d/e/1FAIpQLSdobGQN3O0Ck4fVrgfvRZMme3de-2OaEp1pFtibZkU0koc37w/viewform?usp=sf_link"),a.default.contextMenus.create({id:"1",title:"Scouter",contexts:["selection"]},(()=>{a.default.runtime.lastError})),a.default.contextMenus.onClicked.addListener((function(e,r){return t(this,void 0,void 0,(function*(){console.log("右键菜单点击事件"),a.default.tabs.query({active:!0,currentWindow:!0}).then((r=>{var n;console.log(r);const t=r[0];let s=null!==(n=t.id)&&void 0!==n?n:-1;t&&void 0!==t.id&&a.default.tabs.sendMessage(s,{type:"open-souter",info:e}).catch((r=>{console.log(r),console.log("catch"),a.default.scripting.executeScript({target:{tabId:s},files:["js/vendor.js","js/content_script.js"]}).then((()=>{console.log("chrome.scripting.executeScript")})).then((()=>{a.default.tabs.sendMessage(s,{type:"open-souter",info:e})}))}))}))}))})),a.default.runtime.onConnect.addListener((e=>{console.log("连接中------------"),e.onMessage.addListener((r=>t(void 0,void 0,void 0,(function*(){console.log("接收消息：",r),"getGPTMsg"===r.type&&(console.log("getGPTMsg"),g=!0,a.default.storage.sync.get({openApiKey:"",unsplashApiKey:"",currentLanguage:"English",targetLanguage:"Spanish"}).then((n=>{let s=r.messages;n.openApiKey.length<5?e.postMessage({type:"sendGPTData",status:"erro",content:"🥲 API Key error. Please modify and try again.."}):fetch("https://api.openai.com/v1/chat/completions",{method:"POST",body:JSON.stringify({model:"gpt-3.5-turbo",messages:s,temperature:0,max_tokens:420,top_p:1,frequency_penalty:0,presence_penalty:1,stream:!0}),headers:{Authorization:"Bearer "+n.openApiKey,"Content-Type":"application/json"}}).then((r=>t(void 0,void 0,void 0,(function*(){var n;if(e.postMessage({type:"sendGPTData",status:"begin",content:""}),401===r.status)return console.log("401"),void e.postMessage({type:"sendGPTData",status:"erro",content:"🥲 API Key error. Please modify and try again.."});if(401!==r.status&&200!==r.status)return void e.postMessage({type:"sendGPTData",status:"erro",content:"🥲 Encountered some issues, please try again later."});const t=(0,o.createParser)((r=>{if("event"===r.type)try{void 0!==JSON.parse(r.data).choices[0].delta.content&&e.postMessage({type:"sendGPTData",status:"process",content:JSON.parse(r.data).choices[0].delta.content})}catch(e){console.log(" createParser JSON.parse errow")}})),s=null===(n=r.body)||void 0===n?void 0:n.getReader();if(void 0!==s){try{for(;;){const{done:r,value:n}=yield s.read();if(r){console.log("Done"),e.postMessage({type:"sendGPTData",status:"end",content:""});break}if(!g){console.log("停止渲染数据");break}const a=(new TextDecoder).decode(n);t.feed(a)}}finally{s.releaseLock()}t.reset()}})))).catch((r=>{console.log("error"),console.log(r),e.postMessage({type:"sendGPTData",status:"erro",content:"🥲 Encountered some issues, please try again later."})}))}))),"windowClosed"===r.type&&(g=!1)}))))})),a.default.runtime.onMessage.addListener((function(e,r,n){if(console.log("Message from the content script: "+e.type),"addToAnki"===e.type){console.log("addToAnki");const r=e.messages,s=e=>t(this,void 0,void 0,(function*(){try{yield n(e)}catch(e){console.error(e)}}));return(0,i.ankiAction)("addNote",6,r).then((e=>{console.log(`got list of decks: ${e}`),s({type:"addToAnki",result:"success",error:e.error})})).catch((e=>{console.error(e),s({type:"addToAnki",result:"failure",error:e.error})})),!0}}))},29882:(e,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unsplashSearchPhotos=r.ankiAction=void 0;const t=n(90199);r.ankiAction=function(e,r,n={}){return new Promise(((t,s)=>{fetch("http://127.0.0.1:8765",{method:"POST",body:JSON.stringify({action:e,version:r,params:n})}).then((e=>e.json())).then((e=>{console.log(e),t(e)})).catch((e=>{console.log("error"),console.log(e),s({result:[],error:"Please open the Anki client and install the Anki-Connect plugin before trying again."})}))}))},r.unsplashSearchPhotos=function(e,r){return new Promise(((n,s)=>{(0,t.createApi)({accessKey:e}).search.getPhotos({query:r}).then((e=>{var r,t,s;if(console.log(e),0===(null===(r=e.response)||void 0===r?void 0:r.results.length))n([]);else{const r=null===(t=e.response)||void 0===t?void 0:t.results[0].urls.regular;chrome.tabs.create({url:r}),n(null===(s=e.response)||void 0===s?void 0:s.results)}})).catch((e=>{s(e)}))}))}},90199:(e,r,n)=>{"use strict";n.r(r),n.d(r,{Language:()=>u,OrderBy:()=>m,_internals:()=>te,createApi:()=>se});var t=n(37811);function s(){return s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s.apply(this,arguments)}function a(e,r){if(null==e)return{};var n,t,s={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(s[n]=e[n]);return s}var o=g((function(e){return"string"==typeof e?e:null})),i=function(e){return null!=e};function g(e){return function(r){return i(e(r))}}var l=function(e){return Object.keys(e).reduce((function(r,n){var t,a=e[n];return s({},r,i(a)?((t={})[n]=a,t):{})}),{})};function c(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var t=r.length-1;return function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];for(var a=r[0].apply(this,n),o=1;o<=t;o++)a=r[o].call(this,a);return a}}var u,m,d=g((function(e){return i(e)&&"object"==typeof e&&!Array.isArray(e)?e:null})),A=g((function(e){return Array.isArray(e)&&e.every(o)&&e.length>0?e:null})),h=g((function(e){return d(e)&&"errors"in e&&A(e.errors)?{errors:e.errors}:null})),p=function(e){this.message=e},f=function(e){if(function(e){var r=e.headers.get("content-type");return i(r)&&"application/json"===(0,t.Q)(r).type}(e))return e.json().catch((function(e){throw new p("unable to parse JSON response.")}));throw new p("expected JSON response from server.")},y=function(){return function(e){var r=e.response;return f(r)}},v=function(e){return function(r,n){void 0===n&&(n={});var t=e(r),o=t.headers,i=t.query;return s({},a(t,["headers","query"]),n,{query:i,headers:s({},o,n.headers)})}},x=function(e){return e},b=function(e){var r=e.accessKey,n=e.apiVersion,t=void 0===n?"v1":n,o=e.apiUrl,g=void 0===o?"https://api.unsplash.com":o,l=e.headers,u=e.fetch,m=a(e,["accessKey","apiVersion","apiUrl","headers","fetch"]);return function(e){var n=e.handleResponse;return c(e.handleRequest,(function(e){var a=e.pathname,o=e.query,c=e.method,d=void 0===c?"GET":c,A=e.headers,y=e.body,v=e.signal,x=function(e){var r=e.pathname,n=e.query;return function(e){var t=new URL(e);return function(e){return function(r){"/"===r.pathname?r.pathname=e:r.pathname+=e}}(r)(t),function(e){return function(r){Object.keys(e).forEach((function(n){return r.searchParams.set(n,e[n].toString())}))}}(n)(t),t.toString()}}({pathname:a,query:o})(g),b=s({method:d,headers:s({},l,A,{"Accept-Version":t},i(r)?{Authorization:"Client-ID "+r}:{}),body:y,signal:v},m);return(null!=u?u:fetch)(x,b).then(function(e){return function(r){return(r.ok?e({response:r}).then((function(e){return{type:"success",status:r.status,response:e,originalResponse:r}})):f(r).then((function(e){return s({type:"error",status:r.status},function(e){return h(e)?{errors:e.errors,source:"api"}:{errors:["Responded with a status code outside the 2xx range, and the response body is not recognisable."],source:"decoding"}}(e),{originalResponse:r})}))).catch((function(e){if(e instanceof p)return{type:"error",source:"decoding",status:r.status,originalResponse:r,errors:[e.message]};throw e}))}}(n))}))}},w="x-total",k=function(e){var r=e.headers.get(w);if(i(r)){var n=parseInt(r);if(Number.isInteger(n))return n;throw new p("expected "+w+" header to be valid integer.")}throw new p("expected "+w+" header to exist.")},P=function(){return function(e){var r=e.response;return y()({response:r}).then((function(e){return{results:e,total:k(r)}}))}},T=function(e){return i(e)?{collections:e.join()}:{}},q=function(e){return i(e)?{topics:e.join()}:{}},S=function(e){var r=e.page,n=e.perPage,t=e.orderBy;return l({per_page:n,order_by:t,page:r})},R="/collections",_=function(){var e=function(e){var r=e.collectionId;return R+"/"+r+"/photos"};return{getPathname:e,handleRequest:v((function(r){var n=r.collectionId,t=r.orientation,o=a(r,["collectionId","orientation"]);return{pathname:e({collectionId:n}),query:l(s({},S(o),{orientation:t}))}})),handleResponse:P()}}(),I=function(){var e=function(e){var r=e.collectionId;return R+"/"+r};return{getPathname:e,handleRequest:v((function(r){var n=r.collectionId;return{pathname:e({collectionId:n}),query:{}}})),handleResponse:y()}}(),C=function(){var e=function(){return R};return{getPathname:e,handleRequest:v((function(r){return void 0===r&&(r={}),{pathname:e(),query:S(r)}})),handleResponse:P()}}(),j=function(){var e=function(e){var r=e.collectionId;return R+"/"+r+"/related"};return{getPathname:e,handleRequest:v((function(r){var n=r.collectionId;return{pathname:e({collectionId:n}),query:{}}})),handleResponse:y()}}(),O={__proto__:null,getPhotos:_,get:I,list:C,getRelated:j},E="/photos",M=function(){return{getPathname:function(e){return E},handleRequest:v((function(e){return void 0===e&&(e={}),{pathname:E,query:l(S(e))}})),handleResponse:P()}}(),L=function(){var e=function(e){var r=e.photoId;return E+"/"+r};return{getPathname:e,handleRequest:v((function(r){var n=r.photoId;return{pathname:e({photoId:n}),query:{}}})),handleResponse:y()}}(),N=function(){var e=function(e){var r=e.photoId;return E+"/"+r+"/statistics"};return{getPathname:e,handleRequest:v((function(r){var n=r.photoId;return{pathname:e({photoId:n}),query:{}}})),handleResponse:y()}}(),$=function(){var e=function(){return E+"/random"};return{getPathname:e,handleRequest:v((function(r){var n=void 0===r?{}:r,t=n.collectionIds,o=n.contentFilter,i=n.topicIds,g=a(n,["collectionIds","contentFilter","topicIds"]);return{pathname:e(),query:l(s({},g,{content_filter:o},T(t),q(i))),headers:{"cache-control":"no-cache"}}})),handleResponse:y()}}(),B={handleRequest:v((function(e){var r=function(e){var r=new URL(e),n=r.pathname;return{query:function(e){var r={};return e.forEach((function(e,n){r[n]=e})),r}(r.searchParams),pathname:"/"===n?void 0:n}}(e.downloadLocation),n=r.pathname,t=r.query;if(!i(n))throw new Error("Could not parse pathname from url.");return{pathname:n,query:l(t)}})),handleResponse:y()},D={__proto__:null,list:M,get:L,getStats:N,getRandom:$,trackDownload:B},F="/search",U=function(){var e=function(){return F+"/photos"};return{getPathname:function(r){return e()},handleRequest:v((function(r){var n=r.query,t=r.page,o=r.perPage,i=r.orderBy,g=r.collectionIds,c=r.lang,u=r.contentFilter,m=a(r,["query","page","perPage","orderBy","collectionIds","lang","contentFilter"]);return{pathname:e(),query:l(s({query:n,content_filter:u,lang:c,order_by:i},S({page:t,perPage:o}),T(g),m))}})),handleResponse:y()}}(),z=function(){var e=function(){return F+"/collections"};return{getPathname:function(r){return e()},handleRequest:v((function(r){var n=r.query,t=a(r,["query"]);return{pathname:e(),query:s({query:n},S(t))}})),handleResponse:y()}}(),G=function(){var e=function(){return F+"/users"};return{getPathname:function(r){return e()},handleRequest:v((function(r){var n=r.query,t=a(r,["query"]);return{pathname:e(),query:s({query:n},S(t))}})),handleResponse:y()}}(),K={__proto__:null,getPhotos:U,getCollections:z,getUsers:G},H="/users",Z=function(){var e=function(e){var r=e.username;return H+"/"+r};return{getPathname:e,handleRequest:v((function(r){var n=r.username;return{pathname:e({username:n}),query:{}}})),handleResponse:y()}}(),W=function(){var e=function(e){var r=e.username;return H+"/"+r+"/photos"};return{getPathname:e,handleRequest:v((function(r){var n=r.username,t=r.stats,o=r.orientation,i=a(r,["username","stats","orientation"]);return{pathname:e({username:n}),query:l(s({},S(i),{orientation:o,stats:t}))}})),handleResponse:P()}}(),J=function(){var e=function(e){var r=e.username;return H+"/"+r+"/likes"};return{getPathname:e,handleRequest:v((function(r){var n=r.username,t=r.orientation,o=a(r,["username","orientation"]);return{pathname:e({username:n}),query:l(s({},S(o),{orientation:t}))}})),handleResponse:P()}}(),V=function(){var e=function(e){var r=e.username;return H+"/"+r+"/collections"};return{getPathname:e,handleRequest:v((function(r){var n=r.username,t=a(r,["username"]);return{pathname:e({username:n}),query:S(t)}})),handleResponse:P()}}(),Q={__proto__:null,get:Z,getPhotos:W,getLikes:J,getCollections:V},Y="/topics",X=function(e){var r=e.topicIdOrSlug;return Y+"/"+r},ee=x({getPathname:X,handleRequest:function(e){var r=e.page,n=e.perPage,t=e.orderBy,a=e.topicIdsOrSlugs;return{pathname:Y,query:l(s({},S({page:r,perPage:n}),{ids:null==a?void 0:a.join(","),order_by:t}))}},handleResponse:P()}),re=x({getPathname:X,handleRequest:function(e){var r=e.topicIdOrSlug;return{pathname:X({topicIdOrSlug:r}),query:{}}},handleResponse:y()}),ne=function(){var e=c(X,(function(e){return e+"/photos"}));return{getPathname:e,handleRequest:function(r){var n=r.topicIdOrSlug,t=r.orientation,o=a(r,["topicIdOrSlug","orientation"]);return{pathname:e({topicIdOrSlug:n}),query:l(s({},S(o),{orientation:t}))}},handleResponse:P()}}(),te={__proto__:null,collections:O,photos:D,search:K,users:Q,topics:{__proto__:null,list:ee,get:re,getPhotos:ne},trackNonHotLinkedPhotoView:function(e){var r=e.appId;return function(e){var n=e.photoId,t=Array.isArray(n)?n:[n];if(t.length>20)throw new Error("You cannot track more than 20 photos at once. Please try again with fewer photos.");return fetch("views.unsplash.com/v?photo_id="+t.join()+"&app_id="+r)}}};!function(e){e.Afrikaans="af",e.Amharic="am",e.Arabic="ar",e.Azerbaijani="az",e.Belarusian="be",e.Bulgarian="bg",e.Bengali="bn",e.Bosnian="bs",e.Catalan="ca",e.Cebuano="ceb",e.Corsican="co",e.Czech="cs",e.Welsh="cy",e.Danish="da",e.German="de",e.Greek="el",e.English="en",e.Esperanto="eo",e.Spanish="es",e.Estonian="et",e.Basque="eu",e.Persian="fa",e.Finnish="fi",e.French="fr",e.Frisian="fy",e.Irish="ga",e.ScotsGaelic="gd",e.Galician="gl",e.Gujarati="gu",e.Hausa="ha",e.Hawaiian="haw",e.Hindi="hi",e.Hmong="hmn",e.Croatian="hr",e.HaitianCreole="ht",e.Hungarian="hu",e.Armenian="hy",e.Indonesian="id",e.Igbo="ig",e.Icelandic="is",e.Italian="it",e.Hebrew="iw",e.Japanese="ja",e.Javanese="jw",e.Georgian="ka",e.Kazakh="kk",e.Khmer="km",e.Kannada="kn",e.Korean="ko",e.Kurdish="ku",e.Kyrgyz="ky",e.Latin="la",e.Luxembourgish="lb",e.Lao="lo",e.Lithuanian="lt",e.Latvian="lv",e.Malagasy="mg",e.Maori="mi",e.Macedonian="mk",e.Malayalam="ml",e.Mongolian="mn",e.Marathi="mr",e.Malay="ms",e.Maltese="mt",e.Myanmar="my",e.Nepali="ne",e.Dutch="nl",e.Norwegian="no",e.Nyanja="ny",e.Oriya="or",e.Punjabi="pa",e.Polish="pl",e.Pashto="ps",e.Portuguese="pt",e.Romanian="ro",e.Russian="ru",e.Kinyarwanda="rw",e.Sindhi="sd",e.Sinhala="si",e.Slovak="sk",e.Slovenian="sl",e.Samoan="sm",e.Shona="sn",e.Somali="so",e.Albanian="sq",e.Serbian="sr",e.Sesotho="st",e.Sundanese="su",e.Swedish="sv",e.Swahili="sw",e.Tamil="ta",e.Telugu="te",e.Tajik="tg",e.Thai="th",e.Turkmen="tk",e.Filipino="tl",e.Turkish="tr",e.Tatar="tt",e.Uighur="ug",e.Ukrainian="uk",e.Urdu="ur",e.Uzbek="uz",e.Vietnamese="vi",e.Xhosa="xh",e.Yiddish="yi",e.Yoruba="yo",e.ChineseSimplified="zh",e.ChineseTraditional="zh-TW",e.Zulu="zu"}(u||(u={})),function(e){e.LATEST="latest",e.POPULAR="popular",e.VIEWS="views",e.DOWNLOADS="downloads",e.OLDEST="oldest"}(m||(m={}));var se=c(b,(function(e){return{photos:{get:e(L),list:e(M),getStats:e(N),getRandom:e($),trackDownload:e(B)},users:{getPhotos:e(W),getCollections:e(V),getLikes:e(J),get:e(Z)},search:{getCollections:e(z),getPhotos:e(U),getUsers:e(G)},collections:{getPhotos:e(_),get:e(I),list:e(C),getRelated:e(j)},topics:{list:e(ee),get:e(re),getPhotos:e(ne)}}}))},93150:function(e,r){var n,t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class t extends WeakMap{constructor(e,r=undefined){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const s=(r,n)=>(...t)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):n.singleCallbackArg||t.length<=1&&!1!==n.singleCallbackArg?r.resolve(t[0]):r.resolve(t)},a=e=>1==e?"argument":"arguments",o=(e,r,n)=>new Proxy(r,{apply:(r,t,s)=>n.call(t,e,...s)});let i=Function.call.bind(Object.prototype.hasOwnProperty);const g=(e,r={},n={})=>{let t=Object.create(null),l={has:(r,n)=>n in e||n in t,get(l,c,u){if(c in t)return t[c];if(!(c in e))return;let m=e[c];if("function"==typeof m)if("function"==typeof r[c])m=o(e,e[c],r[c]);else if(i(n,c)){let r=((e,r)=>function(n,...t){if(t.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${t.length}`);if(t.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${t.length}`);return new Promise(((a,o)=>{if(r.fallbackToNoCallback)try{n[e](...t,s({resolve:a,reject:o},r))}catch(s){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,s),n[e](...t),r.fallbackToNoCallback=!1,r.noCallback=!0,a()}else r.noCallback?(n[e](...t),a()):n[e](...t,s({resolve:a,reject:o},r))}))})(c,n[c]);m=o(e,e[c],r)}else m=m.bind(e);else if("object"==typeof m&&null!==m&&(i(r,c)||i(n,c)))m=g(m,r[c],n[c]);else{if(!i(n,"*"))return Object.defineProperty(t,c,{configurable:!0,enumerable:!0,get:()=>e[c],set(r){e[c]=r}}),m;m=g(m,r[c],n["*"])}return t[c]=m,m},set:(r,n,s,a)=>(n in t?t[n]=s:e[n]=s,!0),defineProperty:(e,r,n)=>Reflect.defineProperty(t,r,n),deleteProperty:(e,r)=>Reflect.deleteProperty(t,r)},c=Object.create(e);return new Proxy(c,l)},l=e=>({addListener(r,n,...t){r.addListener(e.get(n),...t)},hasListener:(r,n)=>r.hasListener(e.get(n)),removeListener(r,n){r.removeListener(e.get(n))}}),c=new t((e=>"function"!=typeof e?e:function(r){const n=g(r,{},{getContent:{minArgs:0,maxArgs:0}});e(n)})),u=new t((e=>"function"!=typeof e?e:function(r,n,t){let s,a,o=!1,i=new Promise((e=>{s=function(r){o=!0,e(r)}}));try{a=e(r,n,s)}catch(e){a=Promise.reject(e)}const g=!0!==a&&((l=a)&&"object"==typeof l&&"function"==typeof l.then);var l;if(!0!==a&&!g&&!o)return!1;return(g?a:i).then((e=>{t(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",t({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),m=({reject:n,resolve:t},s)=>{e.runtime.lastError?e.runtime.lastError.message===r?t():n(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?n(new Error(s.message)):t(s)},d=(e,r,n,...t)=>{if(t.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${t.length}`);if(t.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${t.length}`);return new Promise(((e,r)=>{const s=m.bind(null,{resolve:e,reject:r});t.push(s),n.sendMessage(...t)}))},A={devtools:{network:{onRequestFinished:l(c)}},runtime:{onMessage:l(u),onMessageExternal:l(u),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},g(e,A,n)};e.exports=n(chrome)}else e.exports=globalThis.browser},void 0===(t=n.apply(r,[e]))||(e.exports=t)}},r={};function n(t){var s=r[t];if(void 0!==s)return s.exports;var a=r[t]={exports:{}};return e[t].call(a.exports,a,a.exports,n),a.exports}n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(98136)})();